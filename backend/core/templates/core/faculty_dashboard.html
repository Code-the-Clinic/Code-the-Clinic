{% extends "core/base.html" %}

{% block title %}Faculty Dashboard{% endblock %}

{% block content %}
<div class="page-container" style="padding: 20px; max-width: 1200px; margin: auto; font-family: sans-serif;">
    <h2 style="color: #2c3e50; margin-bottom: 24px;">Faculty Dashboard</h2>

    <div style="display: flex; flex-wrap: nowrap; gap: 32px; justify-content: center; align-items: flex-start; min-width: 800px; margin-bottom: 32px;">
        
        <div style="flex: 1 1 400px; min-width: 350px; max-width: 500px; height: 550px; background: white; padding: 24px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); display: flex; flex-direction: column; align-items: center; box-sizing: border-box;">
            <div style="width: 100%; max-width: 380px; margin-bottom: 24px;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px 18px; background: #f8f9fa; padding: 15px; border-radius: 6px; border: 1px solid #eee;">
                    <div>
                        <label style="font-weight: 500; display: block; margin-bottom: 4px; font-size: 12px; color: #666;">Group By</label>
                        <select id="groupByDropdown" style="padding: 6px; border-radius: 4px; border: 1px solid #bbb; width: 100%; background: white;">
                            <option value="sport" selected>Sport</option>
                            <option value="students">Students</option>
                        </select>
                    </div>
                    <div>
                        <label style="font-weight: 500; display: block; margin-bottom: 4px; font-size: 12px; color: #666;">Time</label>
                        <select id="timeDropdown" style="padding: 6px; border-radius: 4px; border: 1px solid #bbb; width: 100%; background: white;">
                            <option value="semester">Semester</option>
                            <option value="week">Week</option>
                        </select>
                    </div>
                    <div>
                        <label style="font-weight: 500; display: block; margin-bottom: 4px; font-size: 12px; color: #666;">Sport</label>
                        <select style="padding: 6px; border-radius: 4px; border: 1px solid #bbb; width: 100%; background: white;">
                            <option>Football</option><option>Soccer</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 10px; align-items: flex-end;">
                        <div style="flex: 1;">
                            <label style="font-weight: 500; display: block; margin-bottom: 4px; font-size: 12px; color: #666;">Semester</label>
                            <select id="semesterDropdown" style="padding: 6px; border-radius: 4px; border: 1px solid #bbb; width: 100%; background: white;">
                                <option>Fall '24</option><option>Spring '25</option>
                            </select>
                        </div>
                        <div id="weekDropdownWrapper" style="display: none; flex: 1;">
                            <label style="font-weight: 500; display: block; margin-bottom: 4px; font-size: 12px; color: #666;">Week</label>
                            <select id="weekDropdown" style="padding: 6px; border-radius: 4px; border: 1px solid #bbb; width: 100%; background: white;">
                                <option>1</option><option>2</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <h3 style="margin: 0 0 15px 0; color: #2c3e50; font-size: 18px;">Care Chart</h3>
            <div style="flex-grow: 1; display: flex; align-items: center; justify-content: center; width: 100%;">
                <canvas id="pieChart" width="280" height="280"></canvas>
            </div>
        </div>

        <div style="flex: 1 1 400px; min-width: 350px; max-width: 500px; height: 550px; background: white; padding: 24px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); display: flex; flex-direction: column; align-items: center; box-sizing: border-box;">
            <div style="width: 100%; max-width: 380px; margin-bottom: 24px;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px 18px; background: #f8f9fa; padding: 15px; border-radius: 6px; border: 1px solid #eee;">
                    <div>
                        <label style="font-weight: 500; display: block; margin-bottom: 4px; font-size: 12px; color: #666;">Group By</label>
                        <select style="padding: 6px; border-radius: 4px; border: 1px solid #bbb; width: 100%; background: white;">
                            <option>Immediate Care</option><option>Rehab</option>
                        </select>
                    </div>
                    <div>
                        <label style="font-weight: 500; display: block; margin-bottom: 4px; font-size: 12px; color: #666;">Time</label>
                        <select id="timeDropdown2" style="padding: 6px; border-radius: 4px; border: 1px solid #bbb; width: 100%; background: white;">
                            <option value="semester">Semester</option>
                            <option value="week">Week</option>
                        </select>
                    </div>
                    <div style="display: flex; gap: 10px; align-items: flex-end;">
                        <div style="flex: 1;">
                            <label style="font-weight: 500; display: block; margin-bottom: 4px; font-size: 12px; color: #666;">Semester</label>
                            <select style="padding: 6px; border-radius: 4px; border: 1px solid #bbb; width: 100%; background: white;">
                                <option>Fall '24</option>
                            </select>
                        </div>
                        <div id="weekDropdownWrapper2" style="display: none; flex: 1;">
                            <label style="font-weight: 500; display: block; margin-bottom: 4px; font-size: 12px; color: #666;">Week</label>
                            <select style="padding: 6px; border-radius: 4px; border: 1px solid #bbb; width: 100%; background: white;">
                                <option>1</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <h3 style="margin: 0 0 15px 0; color: #2c3e50; font-size: 18px;">Care Utilization by Sport</h3>
            <div style="flex-grow: 1; display: flex; align-items: center; justify-content: center; width: 100%;">
                <canvas id="pieChart2" width="280" height="280"></canvas>
            </div>
        </div>
    </div>

    <div style="background: white; padding: 24px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); width: 100%; box-sizing: border-box; margin-bottom: 32px;">
        <h3 style="margin: 0 0 15px 0; color: #2c3e50;">Clinical Experience Trends</h3>
        <div style="display: flex; gap: 15px; flex-wrap: wrap; background: #f8f9fa; padding: 15px; border-radius: 6px; border: 1px solid #eee; margin-bottom: 20px;">
            <div>
                <label style="font-weight: 500; display: block; margin-bottom: 4px; font-size: 13px; color: #666;">View Lines By</label>
                <select id="trendGroupBy" style="padding: 6px 12px; border-radius: 4px; border: 1px solid #bbb; width: 180px; background: white;">
                    <option value="experience">Clinical Experience</option>
                </select>
            </div>
            <div>
                <label style="font-weight: 500; display: block; margin-bottom: 4px; font-size: 13px; color: #666;">Filter Student</label>
                <select style="padding: 6px 12px; border-radius: 4px; border: 1px solid #bbb; width: 175px; background: white;">
                    <option>All Students</option>
                </select>
            </div>
            <div style="margin-left: auto;">
                <label style="font-weight: 500; display: block; margin-bottom: 4px; font-size: 13px; color: #666;">Semester</label>
                <select style="padding: 6px 12px; border-radius: 4px; border: 1px solid #bbb; width: 100px; background: white;">
                    <option>Fall '24</option>
                </select>
            </div>
        </div>
        <div style="position: relative; height: 350px; width: 100%;">
            <canvas id="trendChart"></canvas>
        </div>
    </div>

    <div style="background: white; padding: 24px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); width: 100%; box-sizing: border-box;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h3 style="margin: 0; color: #2c3e50;">Clinical Experience Intensity</h3>
            <div style="display: flex; align-items: center; gap: 8px; font-size: 12px; color: #666;">
                <span>Less Care</span>
                <div style="display: flex; gap: 2px;">
                    <div style="width: 15px; height: 15px; background: #ebedf0; border-radius: 2px;"></div>
                    <div style="width: 15px; height: 15px; background: #9be9a8; border-radius: 2px;"></div>
                    <div style="width: 15px; height: 15px; background: #40c463; border-radius: 2px;"></div>
                    <div style="width: 15px; height: 15px; background: #30a14e; border-radius: 2px;"></div>
                    <div style="width: 15px; height: 15px; background: #216e39; border-radius: 2px;"></div>
                </div>
                <span>More Care</span>
            </div>
        </div>

        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: separate; border-spacing: 4px; font-size: 13px;">
                <thead>
                    <tr>
                        <th style="text-align: left; padding: 8px; color: #666; font-weight: 500; width: 200px;">Experience Type</th>
                        <th style="padding: 8px; color: #666;">Mon</th>
                        <th style="padding: 8px; color: #666;">Tue</th>
                        <th style="padding: 8px; color: #666;">Wed</th>
                        <th style="padding: 8px; color: #666;">Thu</th>
                        <th style="padding: 8px; color: #666;">Fri</th>
                        <th style="padding: 8px; color: #666;">Sat</th>
                        <th style="padding: 8px; color: #666;">Sun</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td style="padding: 8px; font-weight: 500;">Immediate Care</td>
                        <td style="background: #9be9a8; height: 40px; border-radius: 4px; text-align: center; color: #216e39;">4</td>
                        <td style="background: #ebedf0; border-radius: 4px;"></td>
                        <td style="background: #40c463; border-radius: 4px; text-align: center; color: white;">8</td>
                        <td style="background: #9be9a8; border-radius: 4px; text-align: center; color: #216e39;">3</td>
                        <td style="background: #30a14e; border-radius: 4px; text-align: center; color: white;">12</td>
                        <td style="background: #216e39; border-radius: 4px; text-align: center; color: white;">19</td>
                        <td style="background: #ebedf0; border-radius: 4px;"></td>
                    </tr>
                    <tr>
                        <td style="padding: 8px; font-weight: 500;">Musculoskeletal</td>
                        <td style="background: #30a14e; height: 40px; border-radius: 4px; text-align: center; color: white;">15</td>
                        <td style="background: #40c463; border-radius: 4px; text-align: center; color: white;">9</td>
                        <td style="background: #30a14e; border-radius: 4px; text-align: center; color: white;">14</td>
                        <td style="background: #40c463; border-radius: 4px; text-align: center; color: white;">11</td>
                        <td style="background: #9be9a8; border-radius: 4px; text-align: center; color: #216e39;">5</td>
                        <td style="background: #ebedf0; border-radius: 4px;"></td>
                        <td style="background: #ebedf0; border-radius: 4px;"></td>
                    </tr>
                    <tr>
                        <td style="padding: 8px; font-weight: 500;">Rehabilitation</td>
                        <td style="background: #216e39; height: 40px; border-radius: 4px; text-align: center; color: white;">22</td>
                        <td style="background: #216e39; border-radius: 4px; text-align: center; color: white;">25</td>
                        <td style="background: #30a14e; border-radius: 4px; text-align: center; color: white;">18</td>
                        <td style="background: #216e39; border-radius: 4px; text-align: center; color: white;">21</td>
                        <td style="background: #30a14e; border-radius: 4px; text-align: center; color: white;">16</td>
                        <td style="background: #ebedf0; border-radius: 4px;"></td>
                        <td style="background: #ebedf0; border-radius: 4px;"></td>
                    </tr>
                    <tr>
                        <td style="padding: 8px; font-weight: 500;">Taping & Bracing</td>
                        <td style="background: #40c463; height: 40px; border-radius: 4px; text-align: center; color: white;">10</td>
                        <td style="background: #40c463; border-radius: 4px; text-align: center; color: white;">12</td>
                        <td style="background: #40c463; border-radius: 4px; text-align: center; color: white;">10</td>
                        <td style="background: #40c463; border-radius: 4px; text-align: center; color: white;">11</td>
                        <td style="background: #40c463; border-radius: 4px; text-align: center; color: white;">12</td>
                        <td style="background: #30a14e; border-radius: 4px; text-align: center; color: white;">15</td>
                        <td style="background: #ebedf0; border-radius: 4px;"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    function setupTimeToggle(timeId, wrapperId) {
        const timeDropdown = document.getElementById(timeId);
        const wrapper = document.getElementById(wrapperId);
        timeDropdown.addEventListener('change', function() {
            wrapper.style.display = (this.value === 'week') ? 'block' : 'none';
        });
    }
    setupTimeToggle('timeDropdown', 'weekDropdownWrapper');
    setupTimeToggle('timeDropdown2', 'weekDropdownWrapper2');

    const pieOptions = { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { boxWidth: 12, padding: 15 } } } };

    new Chart(document.getElementById('pieChart').getContext('2d'), {
        type: 'pie',
        data: {
            labels: ['Immediate', 'Musculoskeletal', 'Other'],
            datasets: [{ data: [12, 19, 3], backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'] }]
        },
        options: pieOptions
    });

    new Chart(document.getElementById('pieChart2').getContext('2d'), {
        type: 'pie',
        data: {
            labels: ['Football', 'Basketball', 'Soccer', 'Baseball'],
            datasets: [{ data: [14, 9, 6, 11], backgroundColor: ['#4BC0C0', '#9966FF', '#FF9F40', '#36A2EB'] }]
        },
        options: pieOptions
    });

    new Chart(document.getElementById('trendChart').getContext('2d'), {
        type: 'line',
        data: {
            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7', 'Week 8'],
            datasets: [
                { label: 'Immediate Care', data: [2, 5, 3, 8, 4, 10, 7, 9], borderColor: '#FF6384', tension: 0.3, fill: false },
                { label: 'Rehab', data: [10, 12, 15, 14, 20, 22, 25, 28], borderColor: '#4BC0C0', tension: 0.3, fill: false }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: { y: { beginAtZero: true } },
            plugins: { legend: { position: 'top', align: 'end' } }
        }
    });
</script>
{% endblock %}